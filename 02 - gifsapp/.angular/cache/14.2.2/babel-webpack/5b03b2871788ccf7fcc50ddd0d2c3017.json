{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let GifsService = /*#__PURE__*/(() => {\n  class GifsService {\n    constructor(http) {\n      this.http = http;\n      this.apikey = 'sd7DxhfNIg45SvsWzfmtaB0LOVWdkhM8';\n      this.servicioUrl = 'https://api.giphy.com/v1/gifs';\n      this._historial = [];\n      this.resultados = [];\n\n      if (localStorage.getItem('historial')) {\n        this._historial = JSON.parse(localStorage.getItem('historial')) || [];\n        this.resultados = JSON.parse(localStorage.getItem('ult_busqueda')) || [];\n      }\n    }\n\n    get historial() {\n      return [...this._historial];\n    }\n\n    buscarGifs(query = '') {\n      query = query.trim().toLocaleLowerCase(); // SOLO MINUSCULA\n\n      if (!this._historial.includes(query)) {\n        this._historial.unshift(query); //reemplazo de existentes\n\n\n        this._historial = this._historial.splice(0, 10); //limita la cantidad del arreglo a 10\n\n        localStorage.setItem('historial', JSON.stringify(this._historial));\n      }\n\n      const params = new HttpParams().set('api_key', this.apikey).set('limit', '10').set('q', query);\n      this.http.get(`${this.servicioUrl}/search`, {\n        params\n      }).subscribe(resp => {\n        this.resultados = resp.data;\n        localStorage.setItem('ult_busqueda', JSON.stringify(this.resultados));\n      });\n    }\n\n  }\n\n  GifsService.ɵfac = function GifsService_Factory(t) {\n    return new (t || GifsService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  GifsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: GifsService,\n    factory: GifsService.ɵfac,\n    providedIn: 'root'\n  });\n  return GifsService;\n})();","map":null,"metadata":{},"sourceType":"module"}